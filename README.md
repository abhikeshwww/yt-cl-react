# yt-cl-react
Why to use WebPack
Configuring the Webpack
First thing we need is configuring the webpack along with webpack cli, and all of these are the dev dependencies as after bundling the code it will go directly to the production side.
npm install wepack webpack-cli –save-dev

once the installation is done the fist thing we will do to configure our webpack is to create a configuration file in the project root directory named as webpack.config.js
in this config file we will have a n module.export object.
In this object we will add multiple things such as,
-what is the entry point of the project
-where should we put the bundled file after built
-is it a prod mode or a dev mode etc.
After creating the config file we will create a entry point for the webpack as below,

```json
module.export = {
  entry: "./app/index.js",
};
```

Most the times our project requires to include some SVGs, stylesheets etc.
Adding svg packages to webpack
svg-inline-loader
npm install svg-inline-loader --save-dev

once install we need to add config,

whenever there are extra things that webpack required need to be done(Loading stylesheets, SVGs etc.. known as the loaders in the webpack), along with loader we also going to see the plugins.
Loaders: Webpack by itself only knows javascript, so when we want it to pack any other type of resources like .css or .scss or .ts, webpack needs help in order to compile and bundle those non-javascript types of resources.
Loaders are the node-based utilities built for webpack to help webpack to compile and/or transform a given type of resource that can be bundled as a javascript module.
css-loader is the npm module that would help webpack to collect CSS from all the css files referenced in your application and put it into a string.
And then style-loader would take the output string generated by the above css-loader and put it inside the <style> tags in the index.html file.

Now back to the config file for SVG, in order to add the configuration for the SVG loader we need to create new key names as module and value as array of rules.
Here this rule will tell what to load on occurrences of something.

```json
module.export = {
  entry: "./app/index.js",
  module: {
    rules: [
      {
        test: /\.svg$/,
        loader: "svg-inline-loader",
      },
    ],
  },
};

```

In above config we can see the config as whenever there is an SVG load the svg-inline-loader as JavaScript doesn’t understand the SVGs.

Adding Stylesheets in the webpack config.
npm install --save-dev css-loader

```json
module.export = {
  entry: "./app/index.js",
  module: {
    rules: [
      {
        test: /\.svg$/,
        use: "svg-inline-loader",
      },
      {
        test: /\.css$/i,
        use: ["style-loader", "css-loader"],
      },
    ],
  },
};
```

Next we need to add Babel in to our project
npm install -D babel-loader

```json
module.export = {
  entry: "./app/index.js",
  module: {
    rules: [
      {
        test: /\.svg$/,
        use: "svg-inline-loader",
      },
      {
        test: /\.css$/i,
        use: ["style-loader", "css-loader"],
      },
      {
        test: /\.(js)$/,
        use: "babel-loader",
      },
    ],
  },
};

```

Next we will add the output configuration like the output file name, path etc…

```json
module.export = {
  entry: "./app/index.js",
  module: {
    …
  },
  output:{
    path: "",
    filename: "bundle.js"
  }
};

```

Here output file name we can give anything we want.

Next most of the bundler import some module known as path

```json
const path = require("path");
module.export = {
  entry: "./app/index.js",
  module: {
…
  },
  output: {
    path: path.resolve(__dirname, "dist"),
    filename: "bundle.js",
  },
};

```

We bundling number of different files but somebody has to inject those files into the html file. This we can manually but there are plugins for that.
Loaders are something which do everything before the final compilation is done, these plugins are something which does things after the compilation is done.
Very important plugin is the html-injection-plugin
npm install --save-dev html-webpack-plugin
after add the config as per the documentation.

```json
const path = require("path");
const HtmlWebpackPlugin = require("html-webpack-plugin");

module.export = {
  entry: "./app/index.js",
  module: {
…
  },
  output: {
    path: path.resolve(__dirname, "dist"),
    filename: "bundle.js",
  },
  plugins: [new HtmlWebpackPlugin()],
};

```

What above plugin will do?
It will bundle our code into one single bundle.js file and along wit this it will create a html file and will inject that js file into this html file index.html

One more thing we will be configuring with Webpack which is known as, the dev server
npm install webpack-dev-server --save-dev
what is the use of dev-server?
Webpack dev server is a web server based on express.
So that you don’t have to spin up other servers like node to see your project locally, webpack dev server provides you a port number where you can see or test your project in the browser locally.
When you run webpack dev server what webpack dev server does is, instead of creating a bundled file ( e.g. bundle.js ) in dist folder, it creates a bundled file in memory. It then serves that information to express, and then express creates a web socket connection to render that on the browser on a certain port no. So you can’t actually see index.html or bundle.js file in dist folder , as its in memory.
Whatever changes you make to the entry file is what will be bundled in memory and will be rendered on the browser by the dev server.

After installing the dependencies we are not require to do any configuration for the is dev server.
Configurations for this dev server are done in the package.json file.

While configuring the webpack there is an option which is very common in the most of the projects which is called as mode.
Mode can be a Production mode or development mode. We will add the configuration as below after the HtmlWebpackPlugin
mode: process.env.NODE_ENV === "production" ? "production" : "development",

now in the end we will configure our last file which is package.json

```json
"scripts": {
    "start" : "webpack-dev-server",
    "build" : "NODE_ENV='production' webpack"
}
```

In build we have added our environment variable to set whether it is a dev or prod environment.
After configuring all the files and saving our project we will build our project using the build command,
npm build // this command we have configured in package.json and depending on the NODE_ENV webpack will decide whether to minify the file or not.
Once build done, under dist folder one bundle.js file along with the index.html file will be created which we can use for deployment.

Next to run the project we will execute below command,
npm start
but here we will get the error ‘Command Failed’, we can fix this error by updating the Start script as "start" : "webpack serve",
and it will run normally, here interesting thing is that the dev server will keep running in the cache and will not store anything in the file or bundled file. We don’t have to restart the dev server multiple times.
